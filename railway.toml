[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile.backend"

[deploy]
# Temporarily skip migrations to debug healthcheck failure
# TODO: Re-enable after fixing the issue: node server/scripts/run-migrations.js &&
startCommand = "node server/index.js"
healthcheckPath = "/api/health"
healthcheckTimeout = 300
initialDelaySeconds = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Railway-specific environment hints
# (Set these in Railway Dashboard â†’ Variables)
# Required: DATABASE_URL, JWT_SECRET
# Optional: REDIS_URL, PGPOOL_MAX=5, AUTH_COOKIE_DOMAIN (empty), TRUST_PROXY=1
