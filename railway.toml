[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile.backend"

[deploy]
# Run migrations before starting server, continue even if migrations fail
startCommand = "node server/scripts/run-migrations.js || true && node server/index.js"
healthcheckPath = "/api/health"
healthcheckTimeout = 300
initialDelaySeconds = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Railway-specific environment hints
# (Set these in Railway Dashboard â†’ Variables)
# Required: DATABASE_URL, JWT_SECRET
# Optional: REDIS_URL, PGPOOL_MAX=5, AUTH_COOKIE_DOMAIN (empty), TRUST_PROXY=1
